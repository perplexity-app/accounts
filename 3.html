<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Accounts</title>
    <style>
        body { font-family: -apple-system, sans-serif; background: rgba(0,0,0,0.4); margin: 0; display: flex; align-items: flex-end; justify-content: center; height: 100vh; }
        .sheet { background: white; width: 100%; max-width: 600px; border-radius: 16px 16px 0 0; padding: 20px; box-sizing: border-box; animation: slideUp 0.3s; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        h2 { margin-top: 0; }
        .account-item { display: flex; align-items: center; padding: 15px 0; border-bottom: 1px solid #eee; cursor: pointer; }
        .avatar { width: 40px; height: 40px; border-radius: 50%; background: #ccc; margin-right: 15px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        .info { flex: 1; }
        .name { font-weight: bold; }
        .handle { color: #536471; font-size: 14px; }
        .add-account { color: #1d9bf0; padding: 15px 0; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>

<div class="sheet">
    <h2>Accounts</h2>
    <div id="accountList"></div>
    <div class="add-account" onclick="addAccount()">Create a new account or Add existing</div>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const key = urlParams.get('key') || 'https://abc.xyz';

    const sessions = JSON.parse(localStorage.getItem('x_sessions') || '[]');

    const list = document.getElementById('accountList');

    sessions.forEach((acc, index) => {
        const item = document.createElement('div');
        item.className = 'account-item';
        item.innerHTML = `
            <div class="avatar" style="background:gray">${acc.name[0]}</div>
            <div class="info">
                <div class="name">${acc.name}</div>
                <div class="handle">@${acc.handle}</div>
            </div>
            ${index === 0 ? '✔️' : ''} 
        `; // Assuming index 0 is active for visual, real logic needs active index storage
        item.onclick = () => {
            // Logic to set this account as primary/active if needed
            // Redirect as requested
            window.location.href = `${key}/u/${index+1}`; 
        };
        list.appendChild(item);
    });

    function addAccount() {
        window.location.href = '1.html?type=another-login';
    }
</script>
</body>
</html>